# RECONCILIATION SERVICE ENVIRONMENT
# ENV_NAME: Runtime environment name. Values: development|staging|production.
ENV_NAME=development
# VERSION: Service version string used in logs/telemetry.
VERSION=v1.0.0
# LOG_LEVEL: Log verbosity. Values: debug|info|warn|error.
LOG_LEVEL=info
# SERVER_PORT: HTTP status server port.
SERVER_PORT=3005

# POSTGRESQL (READ-ONLY REPLICAS)
# ONBOARDING_DB_HOST: Onboarding replica host.
ONBOARDING_DB_HOST=midaz-postgres-replica
# ONBOARDING_DB_USER: Onboarding replica user.
ONBOARDING_DB_USER=midaz
# ONBOARDING_DB_PASSWORD: Onboarding replica password.
ONBOARDING_DB_PASSWORD=lerian
# ONBOARDING_DB_NAME: Onboarding database name.
ONBOARDING_DB_NAME=onboarding
# ONBOARDING_DB_PORT: Onboarding replica port.
ONBOARDING_DB_PORT=5702
# ONBOARDING_DB_SSLMODE: SSL mode. Values: disable|require.
ONBOARDING_DB_SSLMODE=disable

# TRANSACTION_DB_HOST: Transaction replica host.
TRANSACTION_DB_HOST=midaz-postgres-replica
# TRANSACTION_DB_USER: Transaction replica user.
TRANSACTION_DB_USER=midaz
# TRANSACTION_DB_PASSWORD: Transaction replica password.
TRANSACTION_DB_PASSWORD=lerian
# TRANSACTION_DB_NAME: Transaction database name.
TRANSACTION_DB_NAME=transaction
# TRANSACTION_DB_PORT: Transaction replica port.
TRANSACTION_DB_PORT=5702
# TRANSACTION_DB_SSLMODE: SSL mode. Values: disable|require.
TRANSACTION_DB_SSLMODE=disable

# MONGO (METADATA)
# MONGO_HOST: Mongo host.
MONGO_HOST=midaz-mongodb
# MONGO_USER: Mongo user.
MONGO_USER=midaz
# MONGO_PASSWORD: Mongo password.
MONGO_PASSWORD=lerian
# MONGO_PORT: Mongo port.
MONGO_PORT=5703
# MONGO_PARAMETERS: Optional connection parameters (query string).
MONGO_PARAMETERS=
# ONBOARDING_MONGO_DB_NAME: Onboarding metadata DB name.
ONBOARDING_MONGO_DB_NAME=onboarding
# TRANSACTION_MONGO_DB_NAME: Transaction metadata DB name.
TRANSACTION_MONGO_DB_NAME=transaction
# CRM_MONGO_DB_NAME: CRM metadata DB name (optional, enables CRM alias check).
CRM_MONGO_DB_NAME=crm

# WORKER SCHEDULING
# RECONCILIATION_INTERVAL_SECONDS: Interval between runs (min 60). Values: integer seconds.
RECONCILIATION_INTERVAL_SECONDS=60
# SETTLEMENT_WAIT_SECONDS: Delay before considering transactions settled. Values: integer seconds.
SETTLEMENT_WAIT_SECONDS=300
# DISCREPANCY_THRESHOLD: Minimum absolute discrepancy to report. Values: integer (0 = report all).
DISCREPANCY_THRESHOLD=0
# MAX_DISCREPANCIES_TO_REPORT: Max discrepancies to include in report.
MAX_DISCREPANCIES_TO_REPORT=100

# OUTBOX / METADATA / CROSS-DB SCANS
# OUTBOX_STALE_SECONDS: Processing timeout for outbox entries (seconds).
OUTBOX_STALE_SECONDS=600
# METADATA_LOOKBACK_DAYS: Days to look back for metadata checks.
METADATA_LOOKBACK_DAYS=7
# METADATA_MAX_SCAN: Max metadata records to scan per run.
METADATA_MAX_SCAN=5000
# CROSSDB_BATCH_SIZE: Batch size for cross-db checks.
CROSSDB_BATCH_SIZE=200
# CROSSDB_MAX_SCAN: Max records scanned for cross-db checks.
CROSSDB_MAX_SCAN=5000
# REDIS_SAMPLE_SIZE: Sample size for redis sync checks.
REDIS_SAMPLE_SIZE=250

# REPORT PERSISTENCE
# REPORTS_DIR: Directory to store reports.
REPORTS_DIR=./reports
# REPORTS_MAX_FILES: Max files to keep.
REPORTS_MAX_FILES=100
# REPORTS_RETENTION_DAYS: Retention days for reports.
REPORTS_RETENTION_DAYS=7

# REDIS (OPTIONAL: ENABLES REDIS CHECK)
# REDIS_HOST: Redis host (standalone), or comma-separated endpoints for sentinel/cluster.
REDIS_HOST=midaz-valkey:5704
# REDIS_PASSWORD: Redis password (leave empty for no auth).
REDIS_PASSWORD=lerian
# REDIS_DB: Redis database index.
REDIS_DB=0
# REDIS_PROTOCOL: Redis protocol version (2 or 3).
REDIS_PROTOCOL=3
# REDIS_TLS: Enable TLS for Redis. Values: true|false.
REDIS_TLS=false
# REDIS_CA_CERT: Path to CA cert (required when REDIS_TLS=true).
REDIS_CA_CERT=
# REDIS_POOL_SIZE: Max connections in pool.
REDIS_POOL_SIZE=10
# REDIS_READ_TIMEOUT: Read timeout in seconds.
REDIS_READ_TIMEOUT=3
# REDIS_WRITE_TIMEOUT: Write timeout in seconds.
REDIS_WRITE_TIMEOUT=3
# REDIS_DIAL_TIMEOUT: Dial timeout in seconds.
REDIS_DIAL_TIMEOUT=5
# REDIS_POOL_TIMEOUT: Pool wait timeout in seconds.
REDIS_POOL_TIMEOUT=2
# REDIS_MAX_RETRIES: Max retry attempts.
REDIS_MAX_RETRIES=3
# REDIS_MIN_RETRY_BACKOFF: Min backoff in milliseconds.
REDIS_MIN_RETRY_BACKOFF=8
# REDIS_MAX_RETRY_BACKOFF: Max backoff in seconds.
REDIS_MAX_RETRY_BACKOFF=1

# CONNECTION POOLING
# DB_MAX_OPEN_CONNS: Max open DB connections.
DB_MAX_OPEN_CONNS=10
# DB_MAX_IDLE_CONNS: Max idle DB connections.
DB_MAX_IDLE_CONNS=5

# TELEMETRY
# OTEL_RESOURCE_SERVICE_NAME: Service name in telemetry.
OTEL_RESOURCE_SERVICE_NAME=reconciliation
# OTEL_LIBRARY_NAME: Instrumentation library name.
OTEL_LIBRARY_NAME=github.com/LerianStudio/midaz/components/reconciliation
# OTEL_RESOURCE_SERVICE_VERSION: Service version for telemetry.
OTEL_RESOURCE_SERVICE_VERSION=${VERSION}
# OTEL_RESOURCE_DEPLOYMENT_ENVIRONMENT: Environment label for telemetry.
OTEL_RESOURCE_DEPLOYMENT_ENVIRONMENT=${ENV_NAME}
# OTEL_EXPORTER_OTLP_ENDPOINT: OTLP exporter endpoint.
OTEL_EXPORTER_OTLP_ENDPOINT=midaz-otel-collector:4317
# ENABLE_TELEMETRY: Enable OpenTelemetry. Values: true|false.
ENABLE_TELEMETRY=false
