name: "Go Combined Analysis"

on:
  pull_request:
    branches:
      - develop
      - release-candidate
      - main
    types:
      - opened
      - synchronize
      - reopened
    paths-ignore:
      - '**.md'
      - 'docs/**'
      - '.github/**'
      - 'LICENSE'
      - 'CODEOWNERS'
      - '.gitignore'
      - '.editorconfig'
      - '*.png'
      - '*.jpg'
      - '*.svg'

jobs:
  go-analysis:
    name: Go Analysis
    uses: LerianStudio/github-actions-shared-workflows/.github/workflows/go-pr-analysis.yml@v1.3.3
    with:
      runner_type: "firmino-lxc-runners"
      filter_paths: '["components/onboarding", "components/transaction", "components/crm", "components/ledger"]'
      path_level: 2
      app_name_prefix: "midaz"
      go_version: "1.25"
      golangci_lint_version: "v2.4.0"
      golangci_lint_args: "--timeout=5m"
      coverage_threshold: 85
      fail_on_coverage_threshold: true
      enable_lint: true
      enable_security: true
      enable_tests: true
      enable_coverage: true
      enable_build: true
    secrets: inherit
