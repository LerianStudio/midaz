on:
  release:
    types: [published]

jobs:
  github-releases-to-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Github Releases To Discord
        uses: SethCohen/github-releases-to-discord@v1.13.1
        if: '!github.event.prerelease'
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          color: "2105893"
          username: "Release Changelog"
          content: "||@everyone||"
          footer_title: "Changelog"
          footer_timestamp: true

      - name: Notify Slack of New Release
        uses: rtCamp/action-slack-notify@v2
        if: '!github.event.release.prerelease'
        env:
          SLACK_CHANNEL: "#lerian-product-release" # Channel of Slack
          SLACK_COLOR: "#36a64f"
          SLACK_ICON: ":rocket:"
          SLACK_MESSAGE: "ðŸŽ‰ *Nova Release Publicada!* VersÃ£o: ${GITHUB_REF#refs/tags/} \n\n<https://github.com/${{ github.repository }}/releases/tag/${GITHUB_REF#refs/tags/}|Clique aqui para detalhes.>"
          SLACK_TITLE: "Novo Release"
          SLACK_USERNAME: "Release Bot"
          SLACK_WEBHOOK: ${{ secrets.RELEASE_WEBHOOK_NOTIFICATION_URL }} # Webhook Release Notification
