name: "packages manager"

on:
  release:
    types: [released]

jobs:
   Teste:
     runs-on: ubuntu-24.04
     steps:
       - name: Checkout
         uses: actions/checkout@v4

       - name: Install GitHub CLI
         run: sudo apt-get install -y gh

       - name: Fetch Latest Release
         id: latest_release
         run: |
           RAW_RELEASE=$(gh release list --repo $GITHUB_REPOSITORY --limit 1 --json tagName --jq '.[0].tagName')
           FORMATTED_RELEASE=$(echo "$RAW_RELEASE" | sed -E 's/-[a-zA-Z0-9.]+//')
           echo "Raw release: $RAW_RELEASE"
           echo "Formatted release: $FORMATTED_RELEASE"
           echo "::set-output name=tag::$FORMATTED_RELEASE"         
